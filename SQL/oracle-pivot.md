사내 BI시스템 내에서 PIVOT을 사용한 많은 집계쿼리들을 마주치고, 수정하거나 만들게 되는데요.
작성할 때 마다 다시 찾아보고 매번 헷갈리게 되어 직접 정리해보고자 합니다.
<br>

## PIVOT 함수에 대해

PIVOT은 *Oracle 11g* 부터 지원되는 함수입니다.
**row형태의 data를 column으로 표시**해주는 함수라고 설명할 수 있습니다.
(`PIVOT`함수 사용 이전에는 `GROUP BY`와 `DECODE`를 통해 많이 피벗을 하였습니다)

반대 기능의 함수로는 `UNPIVOT` 함수가 있으며 이에 대해서는 별도로 글을 작성하겠습니다.
<br>

___

## 사용방법 (구문)
```sql
SELECT ...
  FROM ...
 PIVOT (
     [PIVOT 절]
     [PIVOT FOR 절]
     [PIVOT IN 절]
 )
```

## 구문 설명

- PIVOT절: **그룹함수가 적용된 컬럼을 의미**
    **피봇함수는 내부적으로 그룹핑된 결과를 제공**한다. 그렇기 때문에 PIVOT 절에서 그룹핑된 결과를 정의해야 하는데, *마치 GROUP BY가 들어간 쿼리에서 SELECT SUM([컬럼]), AVG([컬럼]) 구절과 같다*.
<br>

- PIVOT FOR 절: **피봇의 기준의 되는 컬럼을 정의**
    **어떠한 기준들로 그룹핑 할 것인지**를 PIVOT FOR 절에서 정의해줘야 하며, *마치 GROUP BY 절에 뒤따르는 컬럼과 같은 역할로 이해하면 된다*.
<br>

- PIVOT IN 절: **PIVOT FOR절에서 정의한 컬럼에서 필터링을 정의**
    WHERE 절과 같은 필터링 역할로 이해하면 된다.
<br>

___

## 예시

수정중입니다.

### 데이터 예시

| YEAR | MONTH |
|:---:|:---:|
| 2019 | 1 |
| 2019 | 2 |
| 2019 | 3 |
| 2019 | 4 |
| 2019 | 5 |
| 2019 | 6 |
| 2019 | 7 |
| 2019 | 8 |
| 2019 | 9 |
| 2019 | 10 |
| 2019 | 11 |
| 2019 | 12 |

다음과 같은 데이터를 갖는 `TEMP_TABLE` 테이블이 존재한다고 가정하겠습니다.